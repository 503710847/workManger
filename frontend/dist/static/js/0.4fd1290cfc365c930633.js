webpackJsonp([0],{"5eyz":function(n,e,r){"use strict";e.c=function(){return Object(t.a)({url:"/api/admin",method:"get"})},e.e=function(n){return Object(t.a)({url:"/api/admin",method:"get",params:{page:n}})},e.d=function(n){return Object(t.a)({url:"/api/admin/"+n,method:"get"})},e.f=function(n,e){return Object(t.a)({url:"/api/admin/"+n+"/reset",method:"post",data:{password:e}})},e.h=function(n){return Object(t.a)({url:"/api/admin/upload",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}})},e.g=function(n,e){return Object(t.a)({url:"/api/admin/"+n,method:"put",params:{name:e.name,role:e.role,avatar:e.avatar},headers:{"Content-Type":"application/x-www-form-urlencoded"}})},e.b=function(n){return Object(t.a)({url:"/api/admin/"+n,method:"delete"})},e.a=function(n){return Object(t.a)({url:"/api/admin",method:"post",data:n})};var t=r("Vo7i")},"PC+2":function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r("TIfe");var t=r("5eyz"),a={data:function(){return{}},props:{image:{type:String,required:!0},showImg:{type:String,required:!0}},name:"avatar-uploader",methods:{beforeUpload:function(n){this.$emit("save",n)}},mounted:function(){}},o={render:function(){var n=this.$createElement,e=this._self._c||n;return e("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{drag:"",action:"123",accept:".jpg,.png","before-upload":this.beforeUpload}},[this.showImg.length>0?e("img",{staticClass:"avatar",attrs:{src:this.image}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),this._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[this._v("点击上传头像，只能上传jpg/png格式文件。")])])},staticRenderFns:[]};var i=r("VU/8")(a,o,!1,function(n){r("gARq")},"data-v-b125140a",null).exports,s=r("/98u");function l(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"editor",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";this.name=n,this.email=e,this.role=r,this.password=t,this.checkPass=a,this.avatar=o}var c={data:function(){var n=this;return{imageUrl:"",form:new l,rules:{name:[{required:!0,message:"请填写名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}],role:[{required:!0,message:"请选择权限",trigger:"change"}],password:[{required:!0,validator:function(e,r,t){r.length<6&&t(new Error("密码不能小于6位")),""===r?t(new Error("请输入密码")):(""!==n.form.checkPass&&n.$refs.form.validateField("checkPass"),t())},trigger:"blur"}],checkPass:[{required:!0,validator:function(e,r,t){""===r?t(new Error("请再次输入密码")):r!==n.form.password?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]}}},components:{avatarUploader:i},methods:{submitForm:function(n){var e=this;this.$refs[n].validate(function(n){if(!n)return e.$message.error("数据校验不通过，请重新填写"),!1;Object(t.a)(e.form).then(function(n){e.$alert("新管理员用户建立成功","友情提示",{callback:function(n){var r=new l;e.form=r}})}).catch(function(n){console.log(n.response)})})},resetForm:function(n){this.$refs[n].resetFields()},saveAvatarImg:function(n){var e=this,r=new FormData;return r.append("photo",n),Object(t.h)(r).then(function(n){var r=n.data.url;e.imageUrl=s.a.site+r,e.form.avatar=r}),!0}},mounted:function(){},created:function(){}},u={render:function(){var n=this,e=n.$createElement,r=n._self._c||e;return r("div",[r("el-form",{ref:"form",staticClass:"demo-form",attrs:{model:n.form,rules:n.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户昵称",prop:"name"}},[r("el-input",{model:{value:n.form.name,callback:function(e){n.$set(n.form,"name",e)},expression:"form.name"}})],1),n._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:n.form.email,callback:function(e){n.$set(n.form,"email",e)},expression:"form.email"}})],1),n._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:n.form.password,callback:function(e){n.$set(n.form,"password",e)},expression:"form.password"}})],1),n._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:n.form.checkPass,callback:function(e){n.$set(n.form,"checkPass",e)},expression:"form.checkPass"}})],1),n._v(" "),r("el-form-item",{attrs:{label:"用户权限",prop:"role"}},[r("el-select",{attrs:{placeholder:"请选择权限"},model:{value:n.form.role,callback:function(e){n.$set(n.form,"role",e)},expression:"form.role"}},[r("el-option",{attrs:{label:"编辑员",value:"editor"}}),n._v(" "),r("el-option",{attrs:{label:"管理员",value:"admin"}})],1)],1),n._v(" "),r("el-form-item",{attrs:{label:"用户头像"}},[r("avatar-uploader",{attrs:{image:n.imageUrl,"show-img":n.form.avatar},on:{save:n.saveAvatarImg}})],1),n._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){n.submitForm("form")}}},[n._v("立即创建")]),n._v(" "),r("el-button",{on:{click:function(e){n.resetForm("form")}}},[n._v("重置")])],1)],1)],1)},staticRenderFns:[]};var m=r("VU/8")(c,u,!1,function(n){r("czve")},null,null);e.default=m.exports},cQeN:function(n,e,r){(n.exports=r("FZ+f")(!1)).push([n.i,"\n.avatar-uploader .el-upload[data-v-b125140a] {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\n}\n.avatar-uploader .el-upload[data-v-b125140a]:hover {\r\n  border-color: #20a0ff;\n}\n.avatar-uploader-icon[data-v-b125140a] {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\n}\n.avatar[data-v-b125140a] {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\n}\r\n",""])},czve:function(n,e,r){var t=r("rzEh");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);r("rjj0")("f3317fc6",t,!0)},gARq:function(n,e,r){var t=r("cQeN");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);r("rjj0")("3e303b82",t,!0)},rzEh:function(n,e,r){(n.exports=r("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});